<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>사업자 회원 가입</title>
  <link rel="stylesheet" href="ajax5.css">
</head>
<body>
  <main class="signup-container">
    <h1 class="title">사업자 회원 가입</h1>

    <form class="signup-form" method="post" action="#">
      <div class="form-row">
        <label for="username">아이디</label>
        <div class="input-row">
          <input id="userid" name="username" type="text" placeholder="아이디 입력" required>
          <button type="button" class="check-btn" onclick="ajax_load()">아이디 중복체크</button>
        </div>
      </div>

      <div class="form-row">
        <label for="password">비밀번호</label>
        <input id="password" name="password" type="password" placeholder="비밀번호 입력" required>
      </div>

      <div class="form-row">
        <label for="company">회사명</label>
        <input id="company" name="company" type="text" placeholder="회사명 입력" required>
      </div>

      <div class="form-row">
        <label for="ceo">대표자명</label>
        <input id="ceo" name="ceo" type="text" placeholder="대표자명 입력" required>
      </div>

      <div class="form-row">
        <label for="bizno">사업자 등록번호</label>
        <div class="input-row">
          <input id="corpno" name="bizno" type="text" placeholder="예: 123-45-67890" required>
          <button type="button" class="check-btn" onclick="ajax_num()">등록번호 중복체크</button>
        </div>
      </div>

      <div class="actions">
        <button type="submit" class="submit-btn">가입하기</button>
        <button type="reset" class="reset-btn">초기화</button>
      </div>
    </form>

    <p class="note">※ 중복체크 버튼은 JavaScript 없이 표시만 되어 있습니다. 서버에서 처리할 엔드포인트와 연동해 주세요.</p>
  </main>
</body>

<script>
	function ajax_load(){
		var userid = document.getElementById("userid");
		var ajax = new XMLHttpRequest();
		ajax.onreadystatechange = function(){
			if(ajax.readyState == 4 && ajax.status == 200){
				console.log(this.response);
				if(this.response == "error"){
					alert("올바른 접근이 아닙니다.");
				}
				else if (this.response == "no"){
					alert("중복체크 되었습니다.");
				}
				else {
					alert("사용가능합니다.");
				}
				//console.log(this.response);
			}
		}
		ajax.open("get", "http://172.30.1.50:8080/web_ajax/ajax5.do?userid="+userid.value+"&part=1", true);
		ajax.send();
	}

	function ajax_num(){
		var corpno = document.getElementById("corpno");
		var ajax1 = new XMLHttpRequest();
		ajax1.onreadystatechange = function(){
			if(ajax1.readyState == 4 && ajax1.status == 200){
				console.log(this.response);
				if(this.response == "error"){
					alert("올바른 접근이 아닙니다.");
				}
				else if (this.response == "no"){
					alert("중복체크 되었습니다.");
				}
				else {
					alert("사용가능합니다.");
				}
				//console.log(this.response);
			}
		}
		ajax1.open("get", "http://172.30.1.50:8080/web_ajax/ajax5.do?corpno="+corpno.value+"&part=2", true);
		ajax1.send();
	}

		
</script>





</html>
